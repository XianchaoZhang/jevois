\hypertarget{classjevois_1_1dnn_1_1PreProcessorBlob}{}\doxysubsection{jevois\+::dnn\+::Pre\+Processor\+Blob Class Reference}
\label{classjevois_1_1dnn_1_1PreProcessorBlob}\index{jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}}


{\ttfamily \#include $<$jevois/\+D\+N\+N/\+Pre\+Processor\+Blob.\+H$>$}



\doxysubsubsection{ }
神经网络管道的预处理器 

这是深度神经网络处理管道的第一步。

此预处理器的工作原理如下。例如，假设一个 1024x576 的相机输入帧和一个 224x224 的神经网络输入：


\begin{DoxyItemize}
\item 如果相机帧不是 R\+GB 或 B\+G\+R，则转换为该格式（例如，将 Y\+U\+YV 转换为 R\+GB 或 B\+G\+R）
\item 如果指定了 {\ttfamily letterbox} ，则在相机框架内使用网络输入的纵横比来适应最大的矩形。例如，224x224 是正方形，因此将 计算出一个围绕相机框架中心的 576x576 正方形框。否则，使用整个相机框架。
\item 裁剪该矩形并将其调整为网络输入大小（如果 {\ttfamily letterbox} 关闭，则可能会拉伸）
\item 如果需要，交换 B\+G\+R/\+R\+G\+B（{\ttfamily rgb} 参数和接收到的相机帧中的颜色顺序的组合）
\item 最准确但也最慢的路径（可以用下面的优化路径替换）：
\begin{DoxyItemize}
\item 将像素数据转换为 float32
\item 如果不是零，则减去 {\ttfamily mean} 
\item 如果不是 1，则除以 {\ttfamily stdev} 
\item 如果不是 1，则乘以 {\ttfamily scale} 。此时，值通常为 \mbox{[}0..1\mbox{]} 或 \mbox{[}-\/1..1\mbox{]}
\item 如果需要，则量化。例如，如果网络需要具有非对称仿射量化 N\+H\+WC\+:8U\+:1x224x224x3\+:\+AA\+:0.\+0078125\+:128 的 uint8，则除 以量化器比例（此处为 0.\+0078125，因此将像素值乘以 128），然后添加零点（此处为 128）。这里的目标是尽可能多地 使用 8 位动态范围。网络想要什么（由其 intensors 参数指定）是在网络量化过程中确定的。
\item 转换为网络所需的数据类型（例如，uint8）
\item 可能将来自相机的打包 R\+G\+B（\+N\+H\+W\+C）转换为平面（\+N\+C\+H\+W）
\item 将形状转换为 4D，批量大小（\+N）始终为 1
\end{DoxyItemize}
\item 因为对于 uint8（以及有符号 int8 和动态定点）这几乎会导致无操作（首先从原生相机范围 \mbox{[}0..255\mbox{]} 转换为 \mbox{[}0..1\mbox{]}，然 后在量化过程中拉伸回 \mbox{[}0..255\mbox{]}），所以针对这些特殊情况（例如，uint8 相机输入到量化的非对称仿射 uint8 网络输入） 实现了快速路径。对于动态定点，快速路径使用快速位移操作；对于 uint8 非对称仿射，有时它是无操作。

您可以通过启用预处理器参数 {\ttfamily details} 在 Je\+Vois-\/\+Pro G\+U\+I（在显示网络处理详细信息的窗口中）中查看这些步骤 
\end{DoxyItemize}

Definition at line 60 of file Pre\+Processor\+Blob.\+H.



Inheritance diagram for jevois\+::dnn\+::Pre\+Processor\+Blob\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classjevois_1_1dnn_1_1PreProcessorBlob__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for jevois\+::dnn\+::Pre\+Processor\+Blob\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classjevois_1_1dnn_1_1PreProcessorBlob__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_a65eb37135c0723f35382e1b7ae5e4db7}{$\sim$\+Pre\+Processor\+Blob}} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_ab7e8c771814ccefdfabdad7069f9c11d}{freeze}} (bool doit) override
\begin{DoxyCompactList}\small\item\em Freeze/unfreeze parameters that users should not change while running. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_a31269c81e3f1ecc1bc98482cf135f3df}{Pre\+Processor}} (std\+::string const \&instance)
\begin{DoxyCompactList}\small\item\em Inherited constructor ok. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ cv\+::\+Mat $>$ \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_aa9783db0f5b8c8be3fdfa230b4353a1a}{process}} (cv\+::\+Mat const \&img, bool swaprb, std\+::vector$<$ vsi\+\_\+nn\+\_\+tensor\+\_\+attr\+\_\+t $>$ const \&attrs, std\+::vector$<$ cv\+::\+Rect $>$ \&crops) override
\begin{DoxyCompactList}\small\item\em 从输入图像中提取 blob \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_a8bbc88440016a12ddbdef6d680414684}{report}} (\mbox{\hyperlink{classjevois_1_1StdModule}{jevois\+::\+Std\+Module}} $\ast$mod, \mbox{\hyperlink{classjevois_1_1RawImage}{jevois\+::\+Raw\+Image}} $\ast$outimg=nullptr, \mbox{\hyperlink{namespacejevois_a3cecc6a65147ea01f0f710f5b54b45ce}{jevois\+::\+Opt\+G\+U\+Ihelper}} $\ast$helper=nullptr, bool overlay=true, bool idle=false) override
\begin{DoxyCompactList}\small\item\em 将上一个 \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_aa9783db0f5b8c8be3fdfa230b4353a1a}{process()}} 中发生的事情报告给控制台/输出视频/\+G\+UI \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_a0095ebe0e37bf8bb22628381710c0455}{its\+Info}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Related Functions}
(Note that these are not member functions.) \begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_adc62c2bf63e3f153f0d92fb6489fc8ce}{J\+E\+V\+O\+I\+S\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+P\+A\+R\+A\+M\+E\+T\+ER}} (numin, size\+\_\+t, \char`\"{}Number of input \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessor_a3ead2199062666efc8e1815dc2d19a0d}{blobs}} to generate from the received video image. \char`\"{} \char`\"{}Any additional inputs required by the network would have to be specified using \char`\"{} \char`\"{}\mbox{\hyperlink{classjevois_1_1dnn_1_1Network}{Network}} parameter extraintensors\char`\"{}, 1, Param\+Categ)
\begin{DoxyCompactList}\small\item\em Parameter. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classjevois_1_1dnn_1_1PreProcessorBlob_a65eb37135c0723f35382e1b7ae5e4db7}\label{classjevois_1_1dnn_1_1PreProcessorBlob_a65eb37135c0723f35382e1b7ae5e4db7}} 
\index{jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}!````~PreProcessorBlob@{$\sim$PreProcessorBlob}}
\index{````~PreProcessorBlob@{$\sim$PreProcessorBlob}!jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}}
\doxyparagraph{\texorpdfstring{$\sim$PreProcessorBlob()}{~PreProcessorBlob()}}
{\footnotesize\ttfamily jevois\+::dnn\+::\+Pre\+Processor\+Blob\+::$\sim$\+Pre\+Processor\+Blob (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Destructor. 



Definition at line 32 of file Pre\+Processor\+Blob.\+C.



\doxysubsubsection{Member Function Documentation}
\mbox{\Hypertarget{classjevois_1_1dnn_1_1PreProcessorBlob_ab7e8c771814ccefdfabdad7069f9c11d}\label{classjevois_1_1dnn_1_1PreProcessorBlob_ab7e8c771814ccefdfabdad7069f9c11d}} 
\index{jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}!freeze@{freeze}}
\index{freeze@{freeze}!jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}}
\doxyparagraph{\texorpdfstring{freeze()}{freeze()}}
{\footnotesize\ttfamily void jevois\+::dnn\+::\+Pre\+Processor\+Blob\+::freeze (\begin{DoxyParamCaption}\item[{bool}]{doit }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Freeze/unfreeze parameters that users should not change while running. 



Implements \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessor_a72917bb3bcf01737deaa85e545bcf215}{jevois\+::dnn\+::\+Pre\+Processor}}.



Definition at line 36 of file Pre\+Processor\+Blob.\+C.

\mbox{\Hypertarget{classjevois_1_1dnn_1_1PreProcessorBlob_a31269c81e3f1ecc1bc98482cf135f3df}\label{classjevois_1_1dnn_1_1PreProcessorBlob_a31269c81e3f1ecc1bc98482cf135f3df}} 
\index{jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}!PreProcessor@{PreProcessor}}
\index{PreProcessor@{PreProcessor}!jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}}
\doxyparagraph{\texorpdfstring{PreProcessor()}{PreProcessor()}}
{\footnotesize\ttfamily jevois\+::dnn\+::\+Pre\+Processor\+::\+Pre\+Processor}



Inherited constructor ok. 



Definition at line 26 of file Pre\+Processor.\+C.

\mbox{\Hypertarget{classjevois_1_1dnn_1_1PreProcessorBlob_aa9783db0f5b8c8be3fdfa230b4353a1a}\label{classjevois_1_1dnn_1_1PreProcessorBlob_aa9783db0f5b8c8be3fdfa230b4353a1a}} 
\index{jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}!process@{process}}
\index{process@{process}!jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}}
\doxyparagraph{\texorpdfstring{process()}{process()}}
{\footnotesize\ttfamily std\+::vector$<$ cv\+::\+Mat $>$ jevois\+::dnn\+::\+Pre\+Processor\+Blob\+::process (\begin{DoxyParamCaption}\item[{cv\+::\+Mat const \&}]{img,  }\item[{bool}]{swaprb,  }\item[{std\+::vector$<$ vsi\+\_\+nn\+\_\+tensor\+\_\+attr\+\_\+t $>$ const \&}]{attrs,  }\item[{std\+::vector$<$ cv\+::\+Rect $>$ \&}]{crops }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



从输入图像中提取 blob 



Implements \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessor_a0f9703abfd50ab9a363ad9d44ec8224a}{jevois\+::dnn\+::\+Pre\+Processor}}.



Definition at line 42 of file Pre\+Processor\+Blob.\+C.



References jevois\+::apply\+Letter\+Box(), jevois\+::dnn\+::attrsize(), jevois\+::dnn\+::attrstr(), jevois\+::cvtypestr(), D\+E\+T\+A\+I\+LS, D\+E\+T\+A\+I\+L\+S2, L\+F\+A\+T\+AL, jevois\+::dnn\+::quantize(), jevois\+::dnn\+::shapestr(), jevois\+::split(), jevois\+::to\+\_\+string(), and jevois\+::dnn\+::vsi2cv().

\mbox{\Hypertarget{classjevois_1_1dnn_1_1PreProcessorBlob_a8bbc88440016a12ddbdef6d680414684}\label{classjevois_1_1dnn_1_1PreProcessorBlob_a8bbc88440016a12ddbdef6d680414684}} 
\index{jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}!report@{report}}
\index{report@{report}!jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}}
\doxyparagraph{\texorpdfstring{report()}{report()}}
{\footnotesize\ttfamily void jevois\+::dnn\+::\+Pre\+Processor\+Blob\+::report (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classjevois_1_1StdModule}{jevois\+::\+Std\+Module}} $\ast$}]{mod,  }\item[{\mbox{\hyperlink{classjevois_1_1RawImage}{jevois\+::\+Raw\+Image}} $\ast$}]{outimg = {\ttfamily nullptr},  }\item[{\mbox{\hyperlink{namespacejevois_a3cecc6a65147ea01f0f710f5b54b45ce}{jevois\+::\+Opt\+G\+U\+Ihelper}} $\ast$}]{helper = {\ttfamily nullptr},  }\item[{bool}]{overlay = {\ttfamily true},  }\item[{bool}]{idle = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



将上一个 \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessorBlob_aa9783db0f5b8c8be3fdfa230b4353a1a}{process()}} 中发生的事情报告给控制台/输出视频/\+G\+UI 



Implements \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessor_a7f6bb6482d8bd5b22be49185aed3c2a4}{jevois\+::dnn\+::\+Pre\+Processor}}.



Definition at line 377 of file Pre\+Processor\+Blob.\+C.



\doxysubsubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{classjevois_1_1dnn_1_1PreProcessorBlob_adc62c2bf63e3f153f0d92fb6489fc8ce}\label{classjevois_1_1dnn_1_1PreProcessorBlob_adc62c2bf63e3f153f0d92fb6489fc8ce}} 
\index{jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}!JEVOIS\_DECLARE\_PARAMETER@{JEVOIS\_DECLARE\_PARAMETER}}
\index{JEVOIS\_DECLARE\_PARAMETER@{JEVOIS\_DECLARE\_PARAMETER}!jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}}
\doxyparagraph{\texorpdfstring{JEVOIS\_DECLARE\_PARAMETER()}{JEVOIS\_DECLARE\_PARAMETER()}}
{\footnotesize\ttfamily J\+E\+V\+O\+I\+S\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+P\+A\+R\+A\+M\+E\+T\+ER (\begin{DoxyParamCaption}\item[{numin}]{,  }\item[{size\+\_\+t}]{,  }\item[{\char`\"{}Number of input \mbox{\hyperlink{classjevois_1_1dnn_1_1PreProcessor_a3ead2199062666efc8e1815dc2d19a0d}{blobs}} to generate from the received video image. \char`\"{} \char`\"{}Any additional inputs required by the network would have to be specified using \char`\"{} \char`\"{}\mbox{\hyperlink{classjevois_1_1dnn_1_1Network}{Network}} parameter extraintensors\char`\"{}}]{,  }\item[{1}]{,  }\item[{Param\+Categ}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [related]}}



Parameter. 



\doxysubsubsection{Member Data Documentation}
\mbox{\Hypertarget{classjevois_1_1dnn_1_1PreProcessorBlob_a0095ebe0e37bf8bb22628381710c0455}\label{classjevois_1_1dnn_1_1PreProcessorBlob_a0095ebe0e37bf8bb22628381710c0455}} 
\index{jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}!itsInfo@{itsInfo}}
\index{itsInfo@{itsInfo}!jevois::dnn::PreProcessorBlob@{jevois::dnn::PreProcessorBlob}}
\doxyparagraph{\texorpdfstring{itsInfo}{itsInfo}}
{\footnotesize\ttfamily std\+::vector$<$std\+::string$>$ jevois\+::dnn\+::\+Pre\+Processor\+Blob\+::its\+Info\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 83 of file Pre\+Processor\+Blob.\+H.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/jevois/\+D\+N\+N/\mbox{\hyperlink{PreProcessorBlob_8H}{Pre\+Processor\+Blob.\+H}}\item 
include/jevois/\+D\+N\+N/\mbox{\hyperlink{PreProcessor_8H}{Pre\+Processor.\+H}}\item 
src/jevois/\+D\+N\+N/\mbox{\hyperlink{PreProcessorBlob_8C}{Pre\+Processor\+Blob.\+C}}\end{DoxyCompactItemize}
