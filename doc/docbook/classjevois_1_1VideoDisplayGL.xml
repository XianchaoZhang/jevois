<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_classjevois_1_1VideoDisplayGL">
<title>jevois::VideoDisplayGL Class Reference</title>
<indexterm><primary>jevois::VideoDisplayGL</primary></indexterm>
<para>
<computeroutput>#include &lt;jevois/Core/VideoDisplayGL.H&gt;</computeroutput>
</para>
<section>
<title> </title>

<para>视频输出到本地屏幕 </para>



<para>此类在 JeVois-Pro 平台上提供加速 OpenGL-ES 显示。它仅适用于 JeVois-Pro，并在其他主机或平台配置上产生致命错误。图 像仅使用 OpenGL-ES 显示在本地屏幕上。</para>

<para>以下是基本操作理论：</para>

<para><itemizedlist>
<listitem>
<para>在主机上运行时，我们打开一个 X11 窗口；在平台上，我们改用 fbdev。</para>
</listitem><listitem>
<para>当第一个视频帧到达时，我们初始化 OpenGL 并创建将在整个窗口中渲染的 2 个三角形。这样做的原因是为了避免线程问题 （因此 OpenGL 在与渲染调用相同的线程中初始化）。我们还初始化与传入图像大小相同的纹理。我们最终创建与窗口或 fbdev 大小相同的表面。然后我们加载并编译着色器以将纹理渲染到表面中。</para>
</listitem><listitem>
<para>在每一帧上，我们只需更新纹理在内存中的像素数据位置并渲染场景。 </para>
</listitem></itemizedlist>
</para>
<para>
Definition at line 47 of file VideoDisplayGL.H.</para>
Inheritance diagram for jevois::VideoDisplayGL:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="classjevois_1_1VideoDisplayGL__inherit__graph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
Collaboration diagram for jevois::VideoDisplayGL:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="classjevois_1_1VideoDisplayGL__coll__graph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
<simplesect>
    <title>Public Member Functions    </title>
        <itemizedlist>
            <listitem><para><link linkend="_classjevois_1_1VideoDisplayGL_1a8769f07b9c87b9e96d2e12d7baa7adb3">VideoDisplayGL</link> (size_t nbufs=2)</para>

<para>Constructor. </para>
</listitem>
            <listitem><para>virtual <link linkend="_classjevois_1_1VideoDisplayGL_1a323557901256eeec8324c6635fff55ea">~VideoDisplayGL</link> ()</para>

<para>用于安全继承的虚拟析构函数 </para>
</listitem>
            <listitem><para>virtual void <link linkend="_classjevois_1_1VideoDisplayGL_1a1acda833d425751fcf879e6f8bdc42dc">setFormat</link> (<link linkend="_structjevois_1_1VideoMapping">VideoMapping</link> const &amp;m) override</para>

<para>设置视频格式和帧速率，分配缓冲区 </para>
</listitem>
            <listitem><para>virtual void <link linkend="_classjevois_1_1VideoDisplayGL_1a39307dc451da6bbefbfafcfd1bd538df">get</link> (<link linkend="_classjevois_1_1RawImage">RawImage</link> &amp;img) override</para>

<para>获取预分配的图像，以便我们可以填充像素数据，然后使用 <link linkend="_classjevois_1_1VideoDisplayGL_1a2c4acdf51bc75b0f6e2093227db4b141">send()</link> 发送出去 </para>
</listitem>
            <listitem><para>virtual void <link linkend="_classjevois_1_1VideoDisplayGL_1a2c4acdf51bc75b0f6e2093227db4b141">send</link> (<link linkend="_classjevois_1_1RawImage">RawImage</link> const &amp;img) override</para>

<para>发送图像以显示 </para>
</listitem>
            <listitem><para>virtual void <link linkend="_classjevois_1_1VideoDisplayGL_1a724f39d6a2261d8e91d757f4b0e2574a">streamOn</link> () override</para>

<para>Start streaming. </para>
</listitem>
            <listitem><para>virtual void <link linkend="_classjevois_1_1VideoDisplayGL_1ab38f4ed907c70e1cbf0e9d3a788aa5c2">abortStream</link> () override</para>

<para>Abort streaming. </para>
</listitem>
            <listitem><para>virtual void <link linkend="_classjevois_1_1VideoDisplayGL_1a8183c77d23ce5bd26222513e1536c413">streamOff</link> () override</para>

<para>Stop streaming. </para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Protected Attributes    </title>
        <itemizedlist>
            <listitem><para>std::vector&lt; std::shared_ptr&lt; <link linkend="_classjevois_1_1VideoBuf">VideoBuf</link> &gt; &gt; <link linkend="_classjevois_1_1VideoDisplayGL_1aa8e049077943397a5d8bb974c4c57136">itsBuffers</link></para>
</listitem>
            <listitem><para><link linkend="_classjevois_1_1BoundedBuffer">BoundedBuffer</link>&lt; <link linkend="_classjevois_1_1RawImage">RawImage</link>, <link linkend="_group__types_1gga12724887bc7648f2f888edb9c3055e3dae1e4c8c9ccd9fc39c391da4bcd093fb2">BlockingBehavior::Block</link>, <link linkend="_group__types_1gga12724887bc7648f2f888edb9c3055e3dae1e4c8c9ccd9fc39c391da4bcd093fb2">BlockingBehavior::Block</link> &gt; <link linkend="_classjevois_1_1VideoDisplayGL_1a379e693c92d1d29034a3dc4a950836e9">itsImageQueue</link></para>
</listitem>
            <listitem><para><link linkend="_classjevois_1_1GPUimage">GPUimage</link> <link linkend="_classjevois_1_1VideoDisplayGL_1ad6cd373bcfa34c9844c490a9856f1595">itsImage</link></para>
</listitem>
            <listitem><para><link linkend="_classjevois_1_1VideoDisplayBackendMALI">VideoDisplayBackendMALI</link> <link linkend="_classjevois_1_1VideoDisplayGL_1a659bb2865b2a4847c0218c34703150d2">itsBackend</link></para>
</listitem>
            <listitem><para>std::atomic&lt; bool &gt; <link linkend="_classjevois_1_1VideoDisplayGL_1ab8b61b2032f36caa655318b280ad9f1a">itsStreaming</link></para>
</listitem>
        </itemizedlist>
</simplesect>
</section>
<section>
<title>Constructor &amp; Destructor Documentation</title>
<anchor xml:id="_classjevois_1_1VideoDisplayGL_1a8769f07b9c87b9e96d2e12d7baa7adb3"/>    <section>
    <title>VideoDisplayGL()</title>
<indexterm><primary>VideoDisplayGL</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>VideoDisplayGL</secondary></indexterm>
<para><computeroutput>jevois::VideoDisplayGL::VideoDisplayGL (size_t nbufs = <computeroutput>2</computeroutput>
)</computeroutput></para><para>

<para>Constructor. </para>
</para>
<para>
Definition at line 27 of file VideoDisplayGL.C.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1a323557901256eeec8324c6635fff55ea"/>    <section>
    <title>~VideoDisplayGL()</title>
<indexterm><primary>~VideoDisplayGL</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>~VideoDisplayGL</secondary></indexterm>
<para><computeroutput>jevois::VideoDisplayGL::~VideoDisplayGL ( )<computeroutput>[virtual]</computeroutput></computeroutput></para><para>

<para>用于安全继承的虚拟析构函数 </para>
</para>
<para>
Definition at line 63 of file VideoDisplayGL.C.</para>
<para>
References LERROR.</para>
</section>
</section>
<section>
<title>Member Function Documentation</title>
<anchor xml:id="_classjevois_1_1VideoDisplayGL_1ab38f4ed907c70e1cbf0e9d3a788aa5c2"/>    <section>
    <title>abortStream()</title>
<indexterm><primary>abortStream</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>abortStream</secondary></indexterm>
<para><computeroutput>void jevois::VideoDisplayGL::abortStream ( )<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>

<para>Abort streaming. </para>
</para>

<para>这只会取消将来的 <link linkend="_classjevois_1_1VideoDisplayGL_1a39307dc451da6bbefbfafcfd1bd538df">get()</link> 和 done() 调用，仍应调用 <link linkend="_classjevois_1_1VideoDisplayGL_1a8183c77d23ce5bd26222513e1536c413">streamOff()</link> 来关闭流式传输。 </para>
<para>
Implements <link linkend="_classjevois_1_1VideoOutput_1a43746f01cfb2b9a1ace149dc7a10498a">jevois::VideoOutput</link>.</para>
<para>
Definition at line 136 of file VideoDisplayGL.C.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1a39307dc451da6bbefbfafcfd1bd538df"/>    <section>
    <title>get()</title>
<indexterm><primary>get</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>get</secondary></indexterm>
<para><computeroutput>void jevois::VideoDisplayGL::get (<link linkend="_classjevois_1_1RawImage">jevois::RawImage</link> &amp; img)<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>

<para>获取预分配的图像，以便我们可以填充像素数据，然后使用 <link linkend="_classjevois_1_1VideoDisplayGL_1a2c4acdf51bc75b0f6e2093227db4b141">send()</link> 发送出去 </para>
</para>
<para>
Implements <link linkend="_classjevois_1_1VideoOutput_1a2df0375b2f2353aa1d1bc28db1a72ff9">jevois::VideoOutput</link>.</para>
<para>
Definition at line 76 of file VideoDisplayGL.C.</para>
<para>
References jevois::RawImage::bufindex, LDEBUG, and LFATAL.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1a2c4acdf51bc75b0f6e2093227db4b141"/>    <section>
    <title>send()</title>
<indexterm><primary>send</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>send</secondary></indexterm>
<para><computeroutput>void jevois::VideoDisplayGL::send (<link linkend="_classjevois_1_1RawImage">jevois::RawImage</link> const &amp; img)<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>

<para>发送图像以显示 </para>
</para>
<para>
Implements <link linkend="_classjevois_1_1VideoOutput_1a3098503da63b44104ba95d46ab620322">jevois::VideoOutput</link>.</para>
<para>
Definition at line 86 of file VideoDisplayGL.C.</para>
<para>
References jevois::RawImage::bufindex, h, LDEBUG, and LFATAL.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1a1acda833d425751fcf879e6f8bdc42dc"/>    <section>
    <title>setFormat()</title>
<indexterm><primary>setFormat</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>setFormat</secondary></indexterm>
<para><computeroutput>void jevois::VideoDisplayGL::setFormat (<link linkend="_structjevois_1_1VideoMapping">jevois::VideoMapping</link> const &amp; m)<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>

<para>设置视频格式和帧速率，分配缓冲区 </para>
</para>
<para>
Implements <link linkend="_classjevois_1_1VideoOutput_1aa65384cf09377d6ced5449debd20f1fb">jevois::VideoOutput</link>.</para>
<para>
Definition at line 32 of file VideoDisplayGL.C.</para>
<para>
References jevois::RawImage::buf, jevois::RawImage::bufindex, jevois::RawImage::fmt, jevois::RawImage::fps, jevois::RawImage::height, LDEBUG, jevois::VideoMapping::ofmt, jevois::VideoMapping::ofps, jevois::VideoMapping::oh, jevois::VideoMapping::osize(), jevois::VideoMapping::ow, and jevois::RawImage::width.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1a8183c77d23ce5bd26222513e1536c413"/>    <section>
    <title>streamOff()</title>
<indexterm><primary>streamOff</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>streamOff</secondary></indexterm>
<para><computeroutput>void jevois::VideoDisplayGL::streamOff ( )<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>

<para>Stop streaming. </para>
</para>
<para>
Implements <link linkend="_classjevois_1_1VideoOutput_1a3a6cc3865116dc74cd065237dc170387">jevois::VideoOutput</link>.</para>
<para>
Definition at line 140 of file VideoDisplayGL.C.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1a724f39d6a2261d8e91d757f4b0e2574a"/>    <section>
    <title>streamOn()</title>
<indexterm><primary>streamOn</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>streamOn</secondary></indexterm>
<para><computeroutput>void jevois::VideoDisplayGL::streamOn ( )<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>

<para>Start streaming. </para>
</para>
<para>
Implements <link linkend="_classjevois_1_1VideoOutput_1a60065f4341aa2d533e6f457d296d6120">jevois::VideoOutput</link>.</para>
<para>
Definition at line 132 of file VideoDisplayGL.C.</para>
</section>
</section>
<section>
<title>Member Data Documentation</title>
<anchor xml:id="_classjevois_1_1VideoDisplayGL_1a659bb2865b2a4847c0218c34703150d2"/>    <section>
    <title>itsBackend</title>
<indexterm><primary>itsBackend</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>itsBackend</secondary></indexterm>
<para><computeroutput><link linkend="_classjevois_1_1VideoDisplayBackendMALI">VideoDisplayBackendMALI</link> jevois::VideoDisplayGL::itsBackend<computeroutput>[protected]</computeroutput></computeroutput></para><para>
Definition at line 81 of file VideoDisplayGL.H.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1aa8e049077943397a5d8bb974c4c57136"/>    <section>
    <title>itsBuffers</title>
<indexterm><primary>itsBuffers</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>itsBuffers</secondary></indexterm>
<para><computeroutput>std::vector&lt;std::shared_ptr&lt;<link linkend="_classjevois_1_1VideoBuf">VideoBuf</link>&gt; &gt; jevois::VideoDisplayGL::itsBuffers<computeroutput>[protected]</computeroutput></computeroutput></para><para>
Definition at line 76 of file VideoDisplayGL.H.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1ad6cd373bcfa34c9844c490a9856f1595"/>    <section>
    <title>itsImage</title>
<indexterm><primary>itsImage</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>itsImage</secondary></indexterm>
<para><computeroutput><link linkend="_classjevois_1_1GPUimage">GPUimage</link> jevois::VideoDisplayGL::itsImage<computeroutput>[protected]</computeroutput></computeroutput></para><para>
Definition at line 78 of file VideoDisplayGL.H.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1a379e693c92d1d29034a3dc4a950836e9"/>    <section>
    <title>itsImageQueue</title>
<indexterm><primary>itsImageQueue</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>itsImageQueue</secondary></indexterm>
<para><computeroutput><link linkend="_classjevois_1_1BoundedBuffer">BoundedBuffer</link>&lt;<link linkend="_classjevois_1_1RawImage">RawImage</link>, <link linkend="_group__types_1gga12724887bc7648f2f888edb9c3055e3dae1e4c8c9ccd9fc39c391da4bcd093fb2">BlockingBehavior::Block</link>, <link linkend="_group__types_1gga12724887bc7648f2f888edb9c3055e3dae1e4c8c9ccd9fc39c391da4bcd093fb2">BlockingBehavior::Block</link>&gt; jevois::VideoDisplayGL::itsImageQueue<computeroutput>[protected]</computeroutput></computeroutput></para><para>
Definition at line 77 of file VideoDisplayGL.H.</para>
    </section><anchor xml:id="_classjevois_1_1VideoDisplayGL_1ab8b61b2032f36caa655318b280ad9f1a"/>    <section>
    <title>itsStreaming</title>
<indexterm><primary>itsStreaming</primary><secondary>jevois::VideoDisplayGL</secondary></indexterm>
<indexterm><primary>jevois::VideoDisplayGL</primary><secondary>itsStreaming</secondary></indexterm>
<para><computeroutput>std::atomic&lt;bool&gt; jevois::VideoDisplayGL::itsStreaming<computeroutput>[protected]</computeroutput></computeroutput></para><para>
Definition at line 85 of file VideoDisplayGL.H.</para>
</section>
<para>
The documentation for this class was generated from the following files:</para>
include/jevois/Core/<link linkend="_VideoDisplayGL_8H">VideoDisplayGL.H</link>src/jevois/Core/<link linkend="_VideoDisplayGL_8C">VideoDisplayGL.C</link></section>
</section>
